<!DOCTYPE html>

<html data-bs-theme="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="CDISC" name="author"/>
<link href="https://TeMeta.github.io/define-json/About/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>About - Define-JSON Documentation</title>
<link href="../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../css/fontawesome.min.css" rel="stylesheet"/>
<link href="../css/brands.min.css" rel="stylesheet"/>
<link href="../css/solid.min.css" rel="stylesheet"/>
<link href="../css/v4-font-face.min.css" rel="stylesheet"/>
<link href="../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" id="hljs-light" rel="stylesheet"/>
<link disabled="" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" id="hljs-dark" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
<div class="container">
<a class="navbar-brand" href="..">Define-JSON Documentation</a>
<!-- Expander button -->
<button aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbar-collapse" data-bs-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="nav-item">
<a class="nav-link" href="..">Index</a>
</li>
<li class="nav-item">
<a aria-current="page" class="nav-link active" href="./">About</a>
</li>
<li class="nav-item">
<a class="nav-link" href="../Versioning/">Versioning</a>
</li>
</ul>
<ul class="nav navbar-nav ms-md-auto">
<li class="nav-item">
<a class="nav-link" data-bs-target="#mkdocs_search_modal" data-bs-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link" href=".." rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../Versioning/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/TeMeta/define-json/edit/main/About.md">Edit on define-json
                                    </a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-bs-target="#toc-collapse" data-bs-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-body-tertiary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#data-implementation-definition-fixing-clinical-data-contracts-at-the-root">Data Implementation Definition: Fixing Clinical Data Contracts at the Root</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#quick-start-xml-json-conversion">üîÑ Quick Start: XML ‚Üî JSON Conversion</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#context-is-everything">Context is everything</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#usages">Usages</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#define-bridges-implementation-and-meaning">Define bridges implementation and meaning</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h2 id="data-implementation-definition-fixing-clinical-data-contracts-at-the-root">Data Implementation Definition: Fixing Clinical Data Contracts at the Root</h2>
<blockquote>
<p>‚Äúsend us the Define too so we know what's going on‚Äù</p>
</blockquote>
<p><code>define-json</code> is a description of data implementation, it can be used for both:</p>
<ol>
<li><strong>Demand</strong>: Data Contract for what a particular analysis or data transfer requires (e.g. describe end-to-end transformations when planning a Clinical Trial)</li>
<li><strong>Supply</strong>: Data Contract for what a particular provider promises to deliver (e.g. Data Transfer Agreements with each supplier)</li>
</ol>
<p>It is being designed in a Clinical Trial context to supplement the CDISC Unified Study Definitions (<a href="https://github.com/cdisc-org/DDF-RA">USDM</a>) and <a href="https://github.com/cdisc-org/DataExchange-DatasetJson">Dataset-JSON</a>, providing a way to describe datasets and how they link causally to their context</p>
<p><a href="https://temeta.github.io/define-json">Documentation Site</a></p>
<h2 id="quick-start-xml-json-conversion">üîÑ Quick Start: XML ‚Üî JSON Conversion</h2>
<h3 id="ir-pipeline-slices-valuelist-xml-exports">IR Pipeline (slices + ValueList + XML exports)</h3>
<p>Run the canonical IR pipeline using only the generated <code>define.py</code> classes:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Install deps</span>
poetry<span class="w"> </span>install

<span class="c1"># Run on a Define-JSON file</span>
poetry<span class="w"> </span>run<span class="w"> </span>define-ir<span class="w"> </span>path/to/input.json<span class="w"> </span>--domains<span class="w"> </span>CE<span class="w"> </span>AE

<span class="c1"># Outputs (alongside input unless --out is provided):</span>
<span class="c1"># - input.canonical.json          (canonical ordering, registry applied)</span>
<span class="c1"># - input.valuelist_projection.json (diagnostic per-domain variable-first contexts)</span>
<span class="c1"># - input.define21.xml            (minimal Define-XML 2.1)</span>
<span class="c1"># - input.define10.xml            (flattened Define-XML 1.0)</span>
</code></pre></div>
<p>For complete bidirectional conversion between Define-XML and Define-JSON, see:
- <strong><a href="../CONVERSION_README/">CONVERSION_README.md</a></strong> - Complete guide
- <strong><a href="../QUICK_REFERENCE/">QUICK_REFERENCE.md</a></strong> - Command cheat sheet</p>
<h3 id="basic-usage">Basic Usage</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Recommended: Use Poetry (handles virtual environment automatically)</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>xml2json<span class="w"> </span>data/define.xml<span class="w"> </span>data/output.json
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2xml<span class="w"> </span>data/input.json<span class="w"> </span>data/output.xml

<span class="c1"># Alternative: Set PYTHONPATH manually</span>
<span class="nv">PYTHONPATH</span><span class="o">=</span>src<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>xml2json<span class="w"> </span>data/define.xml<span class="w"> </span>data/output.json
<span class="nv">PYTHONPATH</span><span class="o">=</span>src<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2xml<span class="w"> </span>data/input.json<span class="w"> </span>data/output.xml

<span class="c1"># From any other directory</span>
<span class="nv">PYTHONPATH</span><span class="o">=</span>/path/to/define-json/src<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>xml2json<span class="w"> </span>data/define.xml<span class="w"> </span>data/output.json
</code></pre></div>
<h3 id="viewing-xml-files-with-stylesheets">Viewing XML Files with Stylesheets</h3>
<p>Generated XML files include an XSL stylesheet reference for proper rendering. Due to browser security policies, you may encounter CORS errors when opening XML files directly. Here are the solutions:</p>
<h4 id="option-1-use-a-local-web-server-recommended">Option 1: Use a Local Web Server (Recommended)</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Navigate to your XML file directory</span>
<span class="nb">cd</span><span class="w"> </span>/path/to/your/xml/files
python<span class="w"> </span>-m<span class="w"> </span>http.server<span class="w"> </span><span class="m">8000</span>

<span class="c1"># Then open: http://localhost:8000/your-file.xml</span>
</code></pre></div>
<h4 id="option-2-generate-html-directly-recommended">Option 2: Generate HTML Directly (Recommended)</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Convert JSON directly to HTML (no CORS issues!)</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2html<span class="w"> </span>input.json<span class="w"> </span>output.html

<span class="c1"># Convert existing XML to HTML</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>xml2html<span class="w"> </span>input.xml<span class="w"> </span>output.html

<span class="c1"># Use custom XSL stylesheet</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2html<span class="w"> </span>input.json<span class="w"> </span>output.html<span class="w"> </span>--xsl<span class="w"> </span>./custom-style.xsl
</code></pre></div>
<h4 id="option-3-configure-stylesheet-path">Option 3: Configure Stylesheet Path</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Use relative path (works when XSL is in same directory)</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2xml<span class="w"> </span>input.json<span class="w"> </span>output.xml<span class="w"> </span>--stylesheet<span class="w"> </span><span class="s2">"./define2-1.xsl"</span>

<span class="c1"># Use absolute URL (if you have XSL hosted online)</span>
poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>define_json<span class="w"> </span>json2xml<span class="w"> </span>input.json<span class="w"> </span>output.xml<span class="w"> </span>--stylesheet<span class="w"> </span><span class="s2">"https://example.com/define2-1.xsl"</span>
</code></pre></div>
<h2 id="context-is-everything">Context is everything</h2>
<blockquote>
<p>‚ÄúDon't provide values without units‚Äù</p>
</blockquote>
<p><code>define-json</code> element definitions are context-specific by design, only applicable to some defined local scope.</p>
<p>By being so strict about scope (every <code>Item</code> must belong to an <code>ItemGroup</code>, which can in turn can act as nested slices), granular reusable definitions can be created and applied to a wide variety of contexts.</p>
<blockquote>
<p>‚ÄúDon't quote someone without knowing what else they were saying and why</p>
</blockquote>
<p>The context that Define is implementing, i.e. <em>your</em> context, is up to you - make sure to record the surrounding context on your end so that the definitions within can be used and reused accurately:</p>
<ul>
<li>CDISC Dataset Specification (actual data)</li>
<li>CDISC Dataset Specialisation (template in the context of Biomedical Concept)</li>
<li>OpenStudyBuilder Activity</li>
<li>FHIR Profile or IG</li>
<li>Clinical Recording Model</li>
<li>Structured Data Collection forms / apps</li>
<li>Clinical eSource Data Spec (a.k.a. Data Transfer Agreement, Data Contract)</li>
<li>OMOP-CDM mappings</li>
<li>Dataset Transformation Metaprogramming</li>
<li>Define-JSON / Define-XML for regulatory submission</li>
<li>AI model feature spec</li>
</ul>
<blockquote>
<p>‚ÄúDon't send data without its Define‚Äù</p>
</blockquote>
<p><img alt="The status quo of silos, files and documents" src="https://github.com/TeMeta/define-json/blob/gh-pages/images/throwing_vase_over_wall.png?raw=true" width="350"/></p>
<p>Clinical trial data exchange needs fixing.  We need to be able to simultaneously speak in nuanced concepts and understand in specific self-explanatory structure. <em>The first step is agreeing on that structure</em>.</p>
<p>Being able to iterate rapidly is important to the early stages of development of this standard. <em>Fix what's broken. Improve what works. Repeat.</em></p>
<blockquote>
<p>‚ÄúDon't define derivation/origin for a field without knowing what the Biomedical Concept is being implemented‚Äù</p>
</blockquote>
<p>Define-JSON details implementation, but also links to <code>Coding</code>, <code>ReifiedConcept</code> and <code>ConceptProperty</code> for structured semantic connections, i.e. enabling each data element to be mapped unambiguously to standard dictionaries/ontologies, abstract concepts, and their properties.</p>
<p>The definition of [something] combines its abstract / template form with a context, then fleshes out that combined context.</p>
<ul>
<li>FHIR Profile is a implementation of a FHIR Resource template in the context of some healthcare or research authority</li>
<li>A granular definition for some Biomedical Concept (BC) is an implementation of a property of that BC in context of the standard being implemented</li>
<li>A Biomedical Concept Property is an implementation of some abstract Data Element Concept in context of a BC</li>
<li>A dataset is an implementation of a specified demand data contract in the context of a specific transfer/timepoint</li>
<li>Transformation code is the implementation of described transformation in the context of a specific environment</li>
</ul>
<h2 id="usages">Usages</h2>
<h3 id="dataset-transformation-program">Dataset Transformation Program</h3>
<p>Both source and target datasets represented in the same framework, with target referencing back to how the source is used explicitly</p>
<p>From this a full dataset transformation expression and/or executable program script can be generated.</p>
<h3 id="regulatory-clinical-trial-submission-supply-data-contract">Regulatory Clinical Trial Submission (Supply Data Contract)</h3>
<p>Metadata to accompany Dataset-JSON, a manifest of specifying precisely what has been provided as well as its origins and how it was derived</p>
<h3 id="dta-bilateral-agreement-supply-demand-data-contract">DTA (bilateral agreement - Supply &amp; Demand Data Contract)</h3>
<p>Data Transfer Agreements are based on the demands specified by the research organisation, against which the supplier agrees to deliver specific data at specific times using a specific structure.</p>
<p>If the Supply has an opinionated structure it can promise to deliver that, or if they have no opinionated structure they can provide the precise structure demanded</p>
<h3 id="demand-data-contracts">Demand Data Contracts</h3>
<p>A search, analysis or data access request is entered</p>
<ul>
<li>specifying how target (including intermediate datasets) are derived from source</li>
<li>specifying the expected content and structure</li>
</ul>
<p>This allows us to specify e.g. a FHIR Data Contract, a promise to provide a particular Resource structure, and understand how it will be interpreted by analysis in tabular form</p>
<h3 id="manifest">Manifest</h3>
<p>Contextual / semantic / derivation / dependency / traceability / structural metadata to supplement a data transfer</p>
<h3 id="data-product-catalog">Data Product Catalog</h3>
<p>A given set of data products can be described using define-json to provide enhanced metadata around lineage, semantics and derivations.</p>
<p>In the context of a Clinical Data Fabric/Mesh/Lake, MDR, or Operational Data Store: define-json can be used as a means of recording granular value-level lineage within dataset, allowing tooling to show dependencies and impact analysis.</p>
<p>Define can even be used a psuedo 'MDR' with the way it tracks dependencies, provenance and impact analysis.</p>
<ul>
<li><code>SourceItem</code> structure has detailed information about where the value came from, whether it's a document or CRF form or source dataset with its own referencable <code>Item</code>.</li>
<li><code>wasDerivedFrom</code> relationship is borrows from PROV-O (Provenance Ontology) exclusively to denote template reuse i.e. "I am reusing this definition from somewhere else and making it my own".</li>
<li><code>SourceItem</code> denotes a direct link. Changes to the source will impact the target. Conversely <code>wasDerivedFrom</code> relationship only provides provenance and lets you identify reuse without coupling the instances - you can modify each instance independently.</li>
</ul>
<h2 id="define-bridges-implementation-and-meaning">Define bridges implementation and meaning</h2>
<p>Because Define is implementation-agnostic, it can be used to compare across different implementations e.g. establishing changes between study-specific implementation and a standard template.</p>
<p>What relates both disparate implementations is explicit link to an independent meaning.</p>
<p>The <code>Coding</code> class semantically-tags all identifiable definitions against known ontologies.</p>
<p>We can also reference to compound 'concept' structures such as the CDISC Biomedical Concept, which <a href="https://dictionary.cambridge.org/dictionary/english/reify">reifies</a> a clinical Observation topic and specifies a set of data properties in context of that topic, so that we can use them to define abstract constraints common to all implementations while staying granular to the topic.</p>
<p>These explicit links can be used to bridge the implementation to the meaningful thing that it is implementing</p></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script src="../js/bootstrap.bundle.min.js"></script>
<script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script src="../js/base.js"></script>
<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script>
<script src="../js/enable_zoom.js"></script>
<script src="../search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<p>From here you can search these documents. Enter your search terms below.</p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div data-no-results-text="No results found" id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
